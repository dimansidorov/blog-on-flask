{% extends 'base.html' %}
{% from 'macro/formhelpers.html' import render_field %}

{% block content %}
    <div class="container article">
        <h2 class="text-center mt-2 mb-4"> Редактирование статьи </h2>
        <hr>
        {% if errors %}
            <div class="m-auto mb-3">

                {% for error in errors %}
                    <div class="alert alert-danger" role="alert">
                        {{ error }}
                    </div>
                {% endfor %}
            </div>
        {% endif %}
        <form method="POST" class="" enctype=multipart/form-data>
            {% if 'csrf_token' in form %}
                {{ form.csrf_token }}
            {% endif %}
            <div class="row row-cols-1 row-cols-sm-2 row-cols-md-2 g-3">
                <h4> Старая версия</h4>
                <h4> Новая версия</h4>
            </div>
            <div class="row row-cols-1 row-cols-sm-2 row-cols-md-2 g-3 m-2">
                <h2 class="text-center">{{ article.title }}</h2>
                <div class="">
                    {{ form.title(for='floatingInput', class="form-control rounded-2",
                    placeholder='Новое название статьи', rows=2 )}}
                </div>
            </div>
            <div class="row row-cols-1 row-cols-sm-2 row-cols-md-2 g-3 m-auto">
                <p class="text-start"> {{ article.body }}</p>
                <div>

                    {{ form.body(for='floatingInput', class="form-control rounded-2",
                    rows=10,
                    placeholder='Новый текст статьи') }}

                </div>
            </div>
            <div class="row row-cols-1 row-cols-sm-2 row-cols-md-2 g-3 m-2">
                <div class="col-auto d-none d-md-block m-auto">
                    <img class="bd-placeholder-img img-shadow" src="{{ url_for('static', filename=article.cover) }}"
                         width="230" height="300">
                </div>
                <div>
                    {{ form.cover.label(class="m-4") }}
                    {{ form.cover }}


                </div>
            </div>
        {{ form.submit(class="btn my-success-button m-3") }}

        </form>


        {#        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-2 g-3">#}
        {#            #}
        {#            <div>#}
        {#                <div class="m-2">#}
        {#                    <h4> Старая версия</h4>#}
        {#                    <h4 class="text-start"> Название статьи: {{ article.title }}</h4>#}
        {#                    <hr>#}
        {#                    <p class="text-start"> Текст: {{ article.body }}</p>#}
        {#                    <hr>#}
        {#                </div>#}
        {#            </div>#}
        {##}
        {#            <div>#}
        {#                <form method="POST" class="m-2" enctype=multipart/form-data>#}
        {#                    <h4> Обновленная версия</h4>#}
        {##}
        {#                    {% if 'csrf_token' in form %}#}
        {#                        {{ form.csrf_token }}#}
        {#                    {% endif %}#}
        {#                    {% for field in ['title', 'body', 'tags'] %}#}
        {#                        {{ render_field(form[field]) }}#}
        {#                    {% endfor %}#}
        {#                    <div class="mb-3">#}
        {#                        {{ form.cover(class="form-label") }}#}
        {#                    </div>#}
        {#                    <div>#}
        {#                        {{ form.submit(class="btn my-success-button m-3") }}#}
        {#                    </div>#}
        {#                </form>#}
        {#            </div>#}
        {##}
        {#        </div>#}

    </div>
{% endblock content %}